"use strict";(self.webpackChunkriasc=self.webpackChunkriasc||[]).push([[7670],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return m}});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),p=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(o.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(a),m=r,f=d["".concat(o,".").concat(m)]||d[m]||u[m]||i;return a?n.createElement(f,l(l({ref:t},c),{},{components:a})):n.createElement(f,l({ref:t},c))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=d;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:r,l[1]=s;for(var p=2;p<i;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},90256:function(e,t,a){a.r(t),a.d(t,{assets:function(){return c},contentTitle:function(){return o},default:function(){return m},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return u}});var n=a(87462),r=a(63366),i=(a(67294),a(3905)),l=["components"],s={id:"agent-rpi",title:"Raspberry Pi based Agent",sidebar_label:"Raspberry Pi",sidebar_positon:2,slug:"/setup/agent/rpi"},o=void 0,p={unversionedId:"setup/agent/agent-rpi",id:"setup/agent/agent-rpi",title:"Raspberry Pi based Agent",description:"The setup of an Raspberry Pi single-board computer is the easiest way to participate in a RIasC cloud of labs.",source:"@site/docs/setup/agent/rpi.md",sourceDirName:"setup/agent",slug:"/setup/agent/rpi",permalink:"/riasc/docs/setup/agent/rpi",editUrl:"https://github.com/ERIGrid2/riasc/edit/master/docs/setup/agent/rpi.md",tags:[],version:"current",frontMatter:{id:"agent-rpi",title:"Raspberry Pi based Agent",sidebar_label:"Raspberry Pi",sidebar_positon:2,slug:"/setup/agent/rpi"},sidebar:"docs",previous:{title:"Manually via Script",permalink:"/riasc/docs/setup/agent/manual"},next:{title:"Server",permalink:"/riasc/docs/setup/server"}},c={},u=[{value:"Requirements",id:"requirements",level:2},{value:"Installation",id:"installation",level:2},{value:"Screenshots",id:"screenshots",level:2}],d={toc:u};function m(e){var t=e.components,s=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,n.Z)({},d,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"The setup of an Raspberry Pi single-board computer is the easiest way to participate in a RIasC cloud of labs."),(0,i.kt)("h2",{id:"requirements"},"Requirements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Raspberry Pi 3B / 4"),(0,i.kt)("li",{parentName:"ul"},"SD card (>= 16 GB)"),(0,i.kt)("li",{parentName:"ul"},"SD card reader"),(0,i.kt)("li",{parentName:"ul"},"SD card imager tool (e.g. ",(0,i.kt)("a",{parentName:"li",href:"https://www.balena.io/etcher/"},"Balena Etcher"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://rwth-aachen.sciebo.de/s/7RpsGEl7NEEsvf1/download?path=%2F&files=2021-09-22-riasc-raspios.zip"},"SD card image of RIasC")," (~ 500 MB)"),(0,i.kt)("li",{parentName:"ul"},"Hostname and token from cluster administrator")),(0,i.kt)("h2",{id:"installation"},"Installation"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Request a token and hostname from the cluster admin.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Note them down. We will need it later."),(0,i.kt)("li",{parentName:"ul"},"Example:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"TOKEN=K109b5813dd9a6944badc430e0e457179e4c83333f882a13ea7356134be77d3508b::server:e851c7e39f5fe771b8b9377c79eaff68")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"HOSTNAME=riasc-node-vtt")))))),(0,i.kt)("li",{parentName:"ol"},"Use your SD card imager tool of choice  to write the image to a spare SD card.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"If asked use the following link as a URL for downloading the image: ",(0,i.kt)("inlineCode",{parentName:"li"},"https://rwth-aachen.sciebo.de/s/7RpsGEl7NEEsvf1/download?path=%2F&files=2021-09-22-riasc-raspios.zip")))),(0,i.kt)("li",{parentName:"ol"},"Re-insert the SD card reader and open the ",(0,i.kt)("inlineCode",{parentName:"li"},"boot")," partition of the SD card."),(0,i.kt)("li",{parentName:"ol"},"Adjust the ",(0,i.kt)("a",{parentName:"li",href:"/riasc/docs/setup/config"},"riasc.yaml")," file inside this partition:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Adjust the the settings ",(0,i.kt)("inlineCode",{parentName:"li"},"hostname")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"ansible.variables.token")," with the values from step 1."),(0,i.kt)("li",{parentName:"ul"},"Relevant locations are marked with ",(0,i.kt)("inlineCode",{parentName:"li"},"# changeme!")," inside the file."))),(0,i.kt)("li",{parentName:"ol"},"Insert the SD card in the Raspberry Pi and power it on."),(0,i.kt)("li",{parentName:"ol"},"Wait until provisioning completes.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"The first boot will take a while (> 10 minutes)"),(0,i.kt)("li",{parentName:"ul"},"You can follow the process by attaching a screen to the Raspberry Pi"),(0,i.kt)("li",{parentName:"ul"},"..or run the following command after login via SSH: ",(0,i.kt)("inlineCode",{parentName:"li"},"sudo journalctl -fu riasc-update")),(0,i.kt)("li",{parentName:"ul"},"The Raspberry Pi will reboot several times during the process."),(0,i.kt)("li",{parentName:"ul"},"Once finished the the console should print ",(0,i.kt)("inlineCode",{parentName:"li"},"RIasC update completed successfully!")))),(0,i.kt)("li",{parentName:"ol"},"Verify that the node has been provisioned successfully:",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"Login to the Raspberry Pi with the standard credentials via console:")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"User: ",(0,i.kt)("inlineCode",{parentName:"li"},"pi")),(0,i.kt)("li",{parentName:"ul"},"Password: ",(0,i.kt)("inlineCode",{parentName:"li"},"raspberry")),(0,i.kt)("li",{parentName:"ul"},"Login via SSH is also possible")),(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"Check the status of the ",(0,i.kt)("inlineCode",{parentName:"li"},"riasc-update")," service by running the following command: ",(0,i.kt)("inlineCode",{parentName:"li"},"sudo systemctl status riasc-update")))),(0,i.kt)("li",{parentName:"ol"},"Change the default password:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Run the ",(0,i.kt)("inlineCode",{parentName:"li"},"passwd")," command and follow the instructions")))),(0,i.kt)("h2",{id:"screenshots"},"Screenshots"),(0,i.kt)("p",null,(0,i.kt)("img",{loading:"lazy",alt:"Balena select URL",src:a(26366).Z,width:"1604",height:"1038"}),"\n",(0,i.kt)("img",{loading:"lazy",alt:"Balena URL",src:a(1083).Z,width:"1604",height:"1038"}),"\n",(0,i.kt)("img",{loading:"lazy",alt:"Balena select target",src:a(35079).Z,width:"1604",height:"1038"}),"\n",(0,i.kt)("img",{loading:"lazy",alt:"Balena flashing",src:a(6324).Z,width:"1604",height:"1038"}),"\n",(0,i.kt)("img",{loading:"lazy",alt:"Balena finish",src:a(90019).Z,width:"1604",height:"1038"})))}m.isMDXComponent=!0},90019:function(e,t,a){t.Z=a.p+"assets/images/balena_finished-3adc784e0ac8c4d8486de65f19c0967a.png"},6324:function(e,t,a){t.Z=a.p+"assets/images/balena_flashing-95aa5f16ce0ff3e6859685b06f155829.png"},35079:function(e,t,a){t.Z=a.p+"assets/images/balena_select_target-9504c64403a613c5514b809a9dead546.png"},26366:function(e,t,a){t.Z=a.p+"assets/images/balena_select_url-d37b3a3cbc6263c171434a14fa168a9c.png"},1083:function(e,t,a){t.Z=a.p+"assets/images/balena_url-b8e2be34d29b8df10c494f5bc3d4f881.png"}}]);