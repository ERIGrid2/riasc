<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="RIasC RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="RIasC Atom Feed"><title data-react-helmet="true">Monitoring of network conditions | RIasC</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://riasc.eu/docs/design/network-monitoring"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Monitoring of network conditions | RIasC"><meta data-react-helmet="true" name="description" content="Facts"><meta data-react-helmet="true" property="og:description" content="Facts"><link data-react-helmet="true" rel="icon" href="/img/logos/riasc.svg"><link data-react-helmet="true" rel="canonical" href="https://riasc.eu/docs/design/network-monitoring"><link data-react-helmet="true" rel="alternate" href="https://riasc.eu/docs/design/network-monitoring" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://riasc.eu/docs/design/network-monitoring" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d08e74de.css">
<link rel="preload" href="/assets/js/runtime~main.329e513f.js" as="script">
<link rel="preload" href="/assets/js/main.f68b5569.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logos/riasc.svg" alt="RIasC Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logos/riasc-dark.svg" alt="RIasC Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">RIasC</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ERIGrid2/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://erigrid2.eu/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>ERIGrid 2.0<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">üåú</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">üåû</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">üëã Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/getting-started/">‚ú® Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/docs/design/provisioning">‚úèÔ∏è Design</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/design/provisioning">Provisioning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/design/ip-overlay">Overlay Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/design/ip-gateway">IP-Gateway/NAT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/design/network-emulation">Network Emulation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/design/time-sync">Time Synchronization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/design/network-monitoring">Network Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/design/code-generation">PSAL Code Generation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/docs/setup">‚öôÔ∏è Setup</a><button aria-label="Toggle the collapsible sidebar category &#x27;‚öôÔ∏è Setup&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/docs/usage">üë§ Usage</a><button aria-label="Toggle the collapsible sidebar category &#x27;üë§ Usage&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/docs/examples">Examples</a><button aria-label="Toggle the collapsible sidebar category &#x27;Examples&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/development/rpi-image">üë∑‚Äç‚ôÄÔ∏è Development</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/further-reading">üìö Further Reading</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/todo">üöß ToDo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/slides">Slides</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/terminology">‚úçÔ∏è Terminology</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/api/crd/">API</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_cwdi"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_xORG"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Monitoring of network conditions</h1></header><h2 class="anchor anchorWithStickyNavbar_mojV" id="facts">Facts<a class="hash-link" href="#facts" title="Direct link to heading">‚Äã</a></h2><ul><li><strong>Source Code:</strong></li><li><strong>Helm Chart:</strong> <a href="https://github.com/ERIGrid2/charts/tree/master/charts/perfsonar" target="_blank" rel="noopener noreferrer">https://github.com/ERIGrid2/charts/tree/master/charts/perfsonar</a></li><li><strong>State:</strong> design phase</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">‚Äã</a></h2><p>One of the objectives of RIasC is the facilitation of distributed experiments such as for example geographically distributed real-time simulation (GD-RTS).
This is enabled by the interconnection of research infrastructures between different universities, countries and even continents which host digital real-time simulators and/or controller/power hardware-in-the-loop (C/PHIL) setups.</p><p>Among other services, RIasC provides an transparent <a href="/docs/design/ip-overlay">overlay network</a> to establish IP connectivity between the locations.
This IP overlay network is established via a peer-to-peer topology.
Meaning, as long as permitted by network policies, traffic will be exchanged directly between each of the labs rather than beeing routed over a central VPN gateway.
In cases where direct communication is blocked, traffic is rerouted over a third party.
Hence, from a user perspective, all participating laboratories appear to connected to the same local network.</p><p>However, due to the geographical distances between them a considerable communication latency exists.
To compensate the effect of these increased communication latencies, an interface algorithm (IA) is required.</p><p>In most cases the IA requires the current communication network state as an input.</p><p>For this purpose, RIasC implements network monitoring which periodically monitors several network metrics such as bandwidth, latency, packet loss, etc.</p><p>The network monitoring feature of RIasC is based on the established perfSONAR tool suite and adapts it for its usage in a Kubernetes cluster.
This includes the deployment of perfSONAR core components in the cluster itself as well as the execution of perfSONAR testpoints on the agent nodes throughout the participating research infrastructures.
Last but not least, a dedicated Kubernetes operator is used to manage test schedules by the means of Kubernetes Custom Resource Definitions (CRD).</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="relation-to-other-riasc-services">Relation to other RIasC services<a class="hash-link" href="#relation-to-other-riasc-services" title="Direct link to heading">‚Äã</a></h3><p>The network monitoring service depends on two other RIasC services:</p><ul><li><strong>IP Overlay Network:</strong> In order to perform actual network tests, an IP connectivity between the testing endpoints is required. This connectivity can either be provided by the existing local or wide-area networks (the Internet). However, in most cases testpoints are either not located within the same local network or their direct communication is prohibited by firewalls. In theses cases the network monitoring tests can utilize the overlay network to tunnel the execution of tests through the overlay network.</li><li><strong>Time-synchronization:</strong> Some network tests measure a one-way delay (OWD) between two testing endpoints. This is facilitated by sending a timestamp of the current time from one testpoint to another an calculating the difference upon receiption. However, this is only possible as long as both the local clocks of the sending and receiving endpoints are synchronized.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="collected-metrics">Collected Metrics<a class="hash-link" href="#collected-metrics" title="Direct link to heading">‚Äã</a></h3><ul><li>Connectivity</li><li>Latency</li><li>Bandwidth</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="employed-technologies">Employed technologies<a class="hash-link" href="#employed-technologies" title="Direct link to heading">‚Äã</a></h2><p>The network monitoring service largely depends on the following already established software projects:</p><ul><li><a href="https://www.perfsonar.net/" target="_blank" rel="noopener noreferrer">perfSONAR</a></li><li><a href="https://kubernetes.io" target="_blank" rel="noopener noreferrer">Kubernetes</a><ul><li><a href="https://kopf.readthedocs.io/en/stable/" target="_blank" rel="noopener noreferrer">Kopf operator framework</a></li><li><a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/" target="_blank" rel="noopener noreferrer">Custom Resources</a></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="architecture">Architecture<a class="hash-link" href="#architecture" title="Direct link to heading">‚Äã</a></h2><p>The following figure shows the architecture of perfSONAR:</p><figure align="center"><img alt="perfSONAR architecture" src="/img/perfsonar_architecture.png" width="90%"><figcaption>perfSONAR architecture.</figcaption></figure><p>It consists of several central components which are deployed once in a cluster.
These central components are:</p><ul><li>Web-interfaces for visualization: Graphs, MaDDash</li><li>Web-interfaces for configuration of testing schedules: pSConfig WebAdmin</li><li>Archiving server for test results: esmond</li><li>pSConfig Server</li></ul><p>These central components are deployed once within the Kubernetes cluster by the cluster operator.</p><p>In addition, the lower part of the figure shows the software components which are running on each of the testpoints.
They are all packaged within a single container image.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="implementation-details">Implementation details<a class="hash-link" href="#implementation-details" title="Direct link to heading">‚Äã</a></h2><h2 class="anchor anchorWithStickyNavbar_mojV" id="further-reading">Further reading<a class="hash-link" href="#further-reading" title="Direct link to heading">‚Äã</a></h2><ul><li><a href="https://https://www.perfsonar.net//" target="_blank" rel="noopener noreferrer">perfSONAR</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ERIGrid2/riasc/edit/master/docs/design/network-monitoring.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/design/time-sync"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Time Synchronization</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/design/code-generation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">PSAL Code Generation</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#facts" class="table-of-contents__link toc-highlight">Facts</a></li><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a><ul><li><a href="#relation-to-other-riasc-services" class="table-of-contents__link toc-highlight">Relation to other RIasC services</a></li><li><a href="#collected-metrics" class="table-of-contents__link toc-highlight">Collected Metrics</a></li></ul></li><li><a href="#employed-technologies" class="table-of-contents__link toc-highlight">Employed technologies</a></li><li><a href="#architecture" class="table-of-contents__link toc-highlight">Architecture</a></li><li><a href="#implementation-details" class="table-of-contents__link toc-highlight">Implementation details</a></li><li><a href="#further-reading" class="table-of-contents__link toc-highlight">Further reading</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/">Getting started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://acs.eonerc.rwth-aachen.de" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Institute for Automation Complex Power Systems<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://erigrid2.eu" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>ERIGrid 2.0 Project<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/ERIGrid2/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 RWTH Aachen University, Institute for Automation Complex Power Systems.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.329e513f.js"></script>
<script src="/assets/js/main.f68b5569.js"></script>
</body>
</html>